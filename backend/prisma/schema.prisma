generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "linux-musl-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String     @id @default(cuid())
  name      String?
  email     String?    @unique
  password  String?
  avatar    String?
  createdAt DateTime   @default(now())
  updatedAt DateTime   @updatedAt
  Purhases  Purhases[]
  Records   Records[]
  products  Products[]
}

model Categories {
  id        Int        @id @default(autoincrement())
  name      String
  slug_url  String     @unique
  createdAt DateTime   @default(now())
  updatedAt DateTime   @updatedAt
  Products  Products[]
}

model Config {
  id                      Int      @id @default(autoincrement())
  dolar                   Float
  useIva                  Boolean? @default(false)
  autoPrice               Boolean? @default(true)
  profit                  Float    @default(0.3)
  roundPrice              Boolean? @default(false)
  default_categories_id   Int?     @default(1)
  default_categories_slug String?  @default("varios")
  threshold               Int?
  default_currency        String?  @default("BS")
  expiration_default      Int?     @default(30)
  bundle_discount         Float?   @default(0.05)
  createdAt               DateTime @default(now())
  updatedAt               DateTime @updatedAt
  moreConfig              String[] @default([])
}

model Products {
  id           Int         @id @default(autoincrement())
  name         String
  stock        Int
  status       Boolean?    @default(true)
  price        Float
  price_ent    Float
  slugs        String[]    @default([])
  image        String?
  low_stock    Int?        @default(3)
  brand        String?
  bundle       Int?
  expiration   DateTime?
  unity        String?
  supplier_id  Int?
  categorie_id Int?
  sell_unity   Boolean?    @default(false)
  createdAt    DateTime    @default(now())
  updatedAt    DateTime    @updatedAt
  slug_url     String      @unique
  categories   Categories? @relation(fields: [categorie_id], references: [id])
  suppliers    Suppliers?  @relation(fields: [supplier_id], references: [id])
  user_id      String?
  User         User?       @relation(fields: [user_id], references: [id])
  purhases     Purhases[]  @relation("ProductsToPurhases")
}

model Purhases {
  id                   Int        @id @default(autoincrement())
  user_id              String?    @default("null")
  total_purchase_amout Float[]    @default([])
  dolar_amout          Float?
  date_credit          Int?
  reference            String?
  quantity             Int
  status               Boolean?   @default(true)
  createdAt            DateTime   @default(now())
  updatedAt            DateTime   @updatedAt
  User                 User?      @relation(fields: [user_id], references: [id])
  Products             Products[] @relation("ProductsToPurhases")
}

model Records {
  id                 Int         @id @default(autoincrement())
  productList        Json
  dolar_price        Decimal
  status             Boolean     @default(false)
  totals             Json
  createdAt          DateTime    @default(now())
  updatedAt          DateTime    @updatedAt
  user_id            String?
  payment_type       String?
  User               User?       @relation(fields: [user_id], references: [id])
  blacklist_id       Int?
  BlackList          black_list? @relation(fields: [blacklist_id], references: [id])
  sell_without_stock Boolean?    @default(false)
}

model Suppliers {
  id          Int        @id @default(autoincrement())
  name        String
  credit_days Int        @default(0)
  company     String?
  email       String?
  address     String?
  city        String?
  state       String?
  country     String?
  zip         String?
  phone       String?
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
  Products    Products[]
}

model black_list {
  id          Int       @id @default(autoincrement())
  name        String
  description String?
  total       Decimal?
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  address     String?
  city        String?
  email       String?
  phone       String?
  records     Records[]
}
